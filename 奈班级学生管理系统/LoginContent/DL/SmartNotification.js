jQuery(document).ready(function () { $("body").append("<div id='divSmallBoxes'></div>"); $("body").append("<div id='divMiniIcons'></div><div id='divbigBoxes'></div>") }); function SmartUnLoading() { $(".divMessageBox").fadeOut(300, function () { $(this).remove() }); $(".LoadingBoxContainer").fadeOut(300, function () { $(this).remove() }) } var ExistMsg = 0, SmartMSGboxCount = 0, PrevTop = 0; $.SmartMessageBox = function (a, l) { var g, b; a = $.extend({ title: "", content: "", NormalButton: undefined, ActiveButton: undefined, buttons: undefined, input: undefined, inputValue: undefined, placeholder: "", options: undefined }, a); var j = 0; j = 1; if (isIE8orlower() == 0 && $.sound_on) { var k = document.createElement("audio"); k.setAttribute("src", $.sound_path + "messagebox.mp3"); k.addEventListener("load", function () { k.play() }, true); k.pause(); k.play() } SmartMSGboxCount = SmartMSGboxCount + 1; if (ExistMsg == 0) { ExistMsg = 1; g = "<div class='divMessageBox animated fadeIn fast' id='MsgBoxBack'></div>"; $("body").append(g); if (isIE8orlower() == 1) { $("#MsgBoxBack").addClass("MessageIE") } } var c = ""; var h = 0; if (a.input != undefined) { h = 1; a.input = a.input.toLowerCase(); switch (a.input) { case "text": a.inputValue = $.type(a.inputValue) === "string" ? a.inputValue.replace(/'/g, "&#x27;") : a.inputValue; c = "<input class='form-control' type='" + a.input + "' id='txt" + SmartMSGboxCount + "' placeholder='" + a.placeholder + "' value='" + a.inputValue + "'/><br/><br/>"; break; case "password": c = "<input class='form-control' type='" + a.input + "' id='txt" + SmartMSGboxCount + "' placeholder='" + a.placeholder + "'/><br/><br/>"; break; case "select": if (a.options == undefined) { alert("For this type of input, the options parameter is required.") } else { c = "<select class='form-control' id='txt" + SmartMSGboxCount + "'>"; for (var f = 0; f <= a.options.length - 1; f++) { if (a.options[f] == "[") { e = "" } else { if (a.options[f] == "]") { d = d + 1; e = "<option>" + e + "</option>"; c += e } else { e += a.options[f] } } } c += "</select>" } break; default: alert("That type of input is not handled yet") } } b = "<div class='MessageBoxContainer animated fadeIn fast' id='Msg" + SmartMSGboxCount + "'>"; b += "<div class='MessageBoxMiddle'>"; b += "<span class='MsgTitle'>" + a.title + "</span class='MsgTitle'>"; b += "<p class='pText'>" + a.content + "</p>"; b += c; b += "<div class='MessageBoxButtonSection'>"; if (a.buttons == undefined) { a.buttons = "[Accept]" } a.buttons = $.trim(a.buttons); a.buttons = a.buttons.split(""); var e = ""; var d = 0; if (a.NormalButton == undefined) { a.NormalButton = "#232323" } if (a.ActiveButton == undefined) { a.ActiveButton = "#ed145b" } for (var f = 0; f <= a.buttons.length - 1; f++) { if (a.buttons[f] == "[") { e = "" } else { if (a.buttons[f] == "]") { d = d + 1; e = "<button id='bot" + d + "-Msg" + SmartMSGboxCount + "' class='btn btn-default btn-sm botTempo'> " + e + "</button>"; b += e } else { e += a.buttons[f] } } } b += "</div>"; b += "</div>"; b += "</div>"; if (SmartMSGboxCount > 1) { $(".MessageBoxContainer").hide(); $(".MessageBoxContainer").css("z-index", 99999) } $(".divMessageBox").append(b); if (h == 1) { $("#txt" + SmartMSGboxCount).focus() } $(".botTempo").hover(function () { var i = $(this).attr("id") }, function () { var i = $(this).attr("id") }); $(".botTempo").click(function () { var p = $(this).attr("id"); var o = p.substr(p.indexOf("-") + 1); var m = $.trim($(this).text()); if (h == 1) { if (typeof l == "function") { var n = o.replace("Msg", ""); var i = $("#txt" + n).val(); if (l) { l(m, i) } } } else { if (typeof l == "function") { if (l) { l(m) } } } $("#" + o).addClass("animated fadeOut fast"); SmartMSGboxCount = SmartMSGboxCount - 1; if (SmartMSGboxCount == 0) { $("#MsgBoxBack").removeClass("fadeIn").addClass("fadeOut").delay(300).queue(function () { ExistMsg = 0; $(this).remove() }) } }) }; var BigBoxes = 0; $.bigBox = function (a, h) { var d, e; a = $.extend({ title: "", content: "", icon: undefined, number: undefined, color: undefined, sound: $.sound_on, sound_file: "bigbox", timeout: undefined, colortime: 1500, colors: undefined }, a); if (a.sound) { if (isIE8orlower() == 0) { var g = document.createElement("audio"); if (navigator.userAgent.match("Firefox/")) { g.setAttribute("src", $.sound_path + a.sound_file + ".ogg") } else { g.setAttribute("src", $.sound_path + a.sound_file + ".mp3") } g.addEventListener("load", function () { g.play() }, true); g.pause(); g.play() } } BigBoxes = BigBoxes + 1; d = "<div id='bigBox" + BigBoxes + "' class='bigBox animated fadeIn fast'><div id='bigBoxColor" + BigBoxes + "'><i class='botClose fa fa-times' id='botClose" + BigBoxes + "'></i>"; d += "<span>" + a.title + "</span>"; d += "<p>" + a.content + "</p>"; d += "<div class='bigboxicon'>"; if (a.icon == undefined) { a.icon = "fa fa-cloud" } d += "<i class='" + a.icon + "'></i>"; d += "</div>"; d += "<div class='bigboxnumber'>"; if (a.number != undefined) { d += a.number } d += "</div></div>"; d += "</div>"; $("#divbigBoxes").append(d); if (a.color == undefined) { a.color = "#004d60" } $("#bigBox" + BigBoxes).css("background-color", a.color); $("#divMiniIcons").append("<div id='miniIcon" + BigBoxes + "' class='cajita animated fadeIn' style='background-color: " + a.color + ";'><i class='" + a.icon + "'/></i></div>"); $("#miniIcon" + BigBoxes).bind("click", function () { var m = $(this).attr("id"); var l = m.replace("miniIcon", "bigBox"); var k = m.replace("miniIcon", "bigBoxColor"); $(".cajita").each(function (o) { var n = $(this).attr("id"); var p = n.replace("miniIcon", "bigBox"); $("#" + p).css("z-index", 9998) }); $("#" + l).css("z-index", 9999); $("#" + k).removeClass("animated fadeIn").delay(1).queue(function () { $(this).show(); $(this).addClass("animated fadeIn"); $(this).clearQueue() }) }); var b = $("#botClose" + BigBoxes); var f = $("#bigBox" + BigBoxes); var j = $("#miniIcon" + BigBoxes); var i; if (a.colors != undefined && a.colors.length > 0) { b.attr("colorcount", "0"); i = setInterval(function () { var k = b.attr("colorcount"); b.animate({ backgroundColor: a.colors[k].color }); f.animate({ backgroundColor: a.colors[k].color }); j.animate({ backgroundColor: a.colors[k].color }); if (k < a.colors.length - 1) { b.attr("colorcount", ((k * 1) + 1)) } else { b.attr("colorcount", 0) } }, a.colortime) } b.bind("click", function () { clearInterval(i); if (typeof h == "function") { if (h) { h() } } var l = $(this).attr("id"); var k = l.replace("botClose", "bigBox"); var m = l.replace("botClose", "miniIcon"); $("#" + k).removeClass("fadeIn fast"); $("#" + k).addClass("fadeOut fast").delay(300).queue(function () { $(this).clearQueue(); $(this).remove() }); $("#" + m).removeClass("fadeIn fast"); $("#" + m).addClass("fadeOut fast").delay(300).queue(function () { $(this).clearQueue(); $(this).remove() }) }); if (a.timeout != undefined) { var c = BigBoxes; setTimeout(function () { clearInterval(i); $("#bigBox" + c).removeClass("fadeIn fast"); $("#bigBox" + c).addClass("fadeOut fast").delay(300).queue(function () { $(this).clearQueue(); $(this).remove() }); $("#miniIcon" + c).removeClass("fadeIn fast"); $("#miniIcon" + c).addClass("fadeOut fast").delay(300).queue(function () { $(this).clearQueue(); $(this).remove() }) }, a.timeout) } }; var SmallBoxes = 0, SmallCount = 0, SmallBoxesAnchos = 0; $.smallBox = function (b, h) { var d, e; b = $.extend({ title: "", content: "", icon: undefined, iconSmall: undefined, sound: $.sound_on, sound_file: "smallbox", color: undefined, timeout: undefined, colortime: 1500, colors: undefined }, b); if (b.sound) { if (isIE8orlower() == 0) { var f = document.createElement("audio"); if (navigator.userAgent.match("Firefox/")) { f.setAttribute("src", $.sound_path + b.sound_file + ".ogg") } else { f.setAttribute("src", $.sound_path + b.sound_file + ".mp3") } f.addEventListener("load", function () { f.play() }, true); f.pause(); f.play() } } SmallBoxes = SmallBoxes + 1; d = ""; var c = "", a = "smallbox" + SmallBoxes; if (b.iconSmall == undefined) { c = "<div class='miniIcono'></div>" } else { c = "<div class='miniIcono'><i class='miniPic " + b.iconSmall + "'></i></div>" } if (b.icon == undefined) { d = "<div id='smallbox" + SmallBoxes + "' class='SmallBox animated fadeInRight fast'><div class='textoFull'><span>" + b.title + "</span><p>" + b.content + "</p></div>" + c + "</div>" } else { d = "<div id='smallbox" + SmallBoxes + "' class='SmallBox animated fadeInRight fast'><div class='foto'><i class='" + b.icon + "'></i></div><div class='textoFoto'><span>" + b.title + "</span><p>" + b.content + "</p></div>" + c + "</div>" } if (SmallBoxes == 1) { $("#divSmallBoxes").append(d); SmallBoxesAnchos = $("#smallbox" + SmallBoxes).height() + 40 } else { var g = $(".SmallBox").size(); if (g == 0) { $("#divSmallBoxes").append(d); SmallBoxesAnchos = $("#smallbox" + SmallBoxes).height() + 40 } else { $("#divSmallBoxes").append(d); $("#smallbox" + SmallBoxes).css("top", SmallBoxesAnchos); SmallBoxesAnchos = SmallBoxesAnchos + $("#smallbox" + SmallBoxes).height() + 20; $(".SmallBox").each(function (k) { if (k == 0) { $(this).css("top", 20); heightPrev = $(this).height() + 40; SmallBoxesAnchos = $(this).height() + 40 } else { $(this).css("top", heightPrev); heightPrev = heightPrev + $(this).height() + 20; SmallBoxesAnchos = SmallBoxesAnchos + $(this).height() + 20 } }) } } var j = $("#smallbox" + SmallBoxes); if (b.color == undefined) { j.css("background-color", "#004d60") } else { j.css("background-color", b.color) } var i; if (b.colors != undefined && b.colors.length > 0) { j.attr("colorcount", "0"); i = setInterval(function () { var k = j.attr("colorcount"); j.animate({ backgroundColor: b.colors[k].color }); if (k < b.colors.length - 1) { j.attr("colorcount", ((k * 1) + 1)) } else { j.attr("colorcount", 0) } }, b.colortime) } if (b.timeout != undefined) { setTimeout(function () { clearInterval(i); var l = $(this).height() + 20; var k = a; var m = $("#" + a).css("top"); if ($("#" + a + ":hover").length != 0) { $("#" + a).on("mouseleave", function () { SmallBoxesAnchos = SmallBoxesAnchos - l; $("#" + a).remove(); if (typeof h == "function") { if (h) { h() } } var o = 1; var n = 0; $(".SmallBox").each(function (p) { if (p == 0) { $(this).animate({ top: 20 }, 300); n = $(this).height() + 40; SmallBoxesAnchos = $(this).height() + 40 } else { $(this).animate({ top: n }, 350); n = n + $(this).height() + 20; SmallBoxesAnchos = SmallBoxesAnchos + $(this).height() + 20 } }) }) } else { clearInterval(i); SmallBoxesAnchos = SmallBoxesAnchos - l; if (typeof h == "function") { if (h) { h() } } $("#" + a).removeClass().addClass("SmallBox").animate({ opacity: 0 }, 300, function () { $(this).remove(); var o = 1; var n = 0; $(".SmallBox").each(function (p) { if (p == 0) { $(this).animate({ top: 20 }, 300); n = $(this).height() + 40; SmallBoxesAnchos = $(this).height() + 40 } else { $(this).animate({ top: n }); n = n + $(this).height() + 20; SmallBoxesAnchos = SmallBoxesAnchos + $(this).height() + 20 } }) }) } }, b.timeout) } $("#smallbox" + SmallBoxes).bind("click", function () { clearInterval(i); if (typeof h == "function") { if (h) { h() } } var l = $(this).height() + 20; var k = $(this).attr("id"); var m = $(this).css("top"); SmallBoxesAnchos = SmallBoxesAnchos - l; $(this).removeClass().addClass("SmallBox").animate({ opacity: 0 }, 300, function () { $(this).remove(); var o = 1; var n = 0; $(".SmallBox").each(function (p) { if (p == 0) { $(this).animate({ top: 20 }, 300); n = $(this).height() + 40; SmallBoxesAnchos = $(this).height() + 40 } else { $(this).animate({ top: n }, 350); n = n + $(this).height() + 20; SmallBoxesAnchos = SmallBoxesAnchos + $(this).height() + 20 } }) }) }) }; function getInternetExplorerVersion() { var c = -1; if (navigator.appName == "Microsoft Internet Explorer") { var a = navigator.userAgent; var b = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"); if (b.exec(a) != null) { c = parseFloat(RegExp.$1) } } return c } function checkVersion() { var b = "You're not using Windows Internet Explorer."; var a = getInternetExplorerVersion(); if (a > -1) { if (a >= 8) { b = "You're using a recent copy of Windows Internet Explorer." } else { b = "You should upgrade your copy of Windows Internet Explorer." } } alert(b) } function isIE8orlower() { var b = "0"; var a = getInternetExplorerVersion(); if (a > -1) { if (a >= 9) { b = 0 } else { b = 1 } } return b };